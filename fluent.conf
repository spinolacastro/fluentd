<source>
    @type udp
    port 5140
    bind 0.0.0.0
    body_size_limit 1M
    format /^(?<ps>\w+)\[(?<pid>\d+)\]: (?<pri>\w+) (?<c_ip>[\w\.]+):(?<c_port>\d+) \[(?<time>.+)\] (?<f_end>[\w-]+) (?<b_end>[\w-]+)\/(?<b_server>[\w-]+) (?<tw>\d+)\/(?<tc>\d+)\/(?<tt>\d+) (?<bytes>\d+) (?<t_state>[\w-]+) (?<actconn>\d+)\/(?<feconn>\d+)\/(?<beconn>\d+)\/(?<srv_conn>\d+)\/(?<retries>\d+) (?<srv_queue>\d+)\/(?<backend_queue>\d+)$/
    tag haproxy.http
    time_format %d/%B/%Y:%H:%M:%S
</source>

<match haproxy.*>
    type copy
    <store>
        # for debug (see /var/log/td-agent.log)
        type stdout
    </store>
</match>